# üêõ –ó–∞—Ö–∏–∞–ª–≥—ã–Ω –¥–∞–≤—Ö–∞—Ä–¥–∞–ª –∞–ª–¥–∞–∞ —à–∞–ª–≥–∞—Ö

## ‚ùå –ê—Å—É—É–¥–∞–ª:
Frontend –¥—ç—ç—Ä –Ω–æ–≥–æ–æ–Ω ”©–Ω–≥”©”©—Ä —Ö–∞—Ä—É—É–ª–∂ –±–∞–π–≥–∞–∞ ”©–¥—Ä“Ø“Ø–¥–∏–π–≥ —Å–æ–Ω–≥–æ—Å–æ–Ω —á backend –∞–ª–¥–∞–∞ ”©–≥—á –±–∞–π–Ω–∞:
```
"Yurt is not available for the selected dates"
```

## üîç –®–∞–ª–≥–∞—Ö –∞–ª—Ö–∞–º—É—É–¥:

### 1. Browser Console —à–∞–ª–≥–∞—Ö
1. Browser DevTools –Ω—ç—ç–Ω—ç (F12)
2. Console tab —Å–æ–Ω–≥–æ–Ω–æ
3. Camp detail page –¥—ç—ç—Ä –æ—Ä–æ—Ö “Ø–µ–¥ –¥–∞—Ä–∞–∞—Ö logs —Ö–∞—Ä–∞–≥–¥–∞—Ö —ë—Å—Ç–æ–π:
   ```
   üîç Active bookings for this yurt: [...]
   üö´ Total disabled dates: X
   üö´ Disabled date ranges: [...]
   ```

### 2. Backend database —à–∞–ª–≥–∞—Ö

Terminal –¥—ç—ç—Ä (tusul_back folder –¥–æ—Ç–æ—Ä):
```bash
cd tusul_back
```

–î–∞—Ä–∞–∞—Ö GraphQL query-–≥ Apollo Studio —ç—Å–≤—ç–ª GraphQL Playground –¥—ç—ç—Ä –∞–∂–∏–ª–ª—É—É–ª–Ω–∞:

```graphql
query GetYurtWithBookings {
  yurt(id: "6f74c9a7-f197-45dd-a19f-a16b5a46813f") {
    id
    name
    location
    bookings {
      id
      startDate
      endDate
      status
      userId
    }
  }
}
```

**–•“Ø–ª—ç—ç–≥–¥—ç–∂ –±–∞–π–≥–∞–∞ “Ø—Ä –¥“Ø–Ω:**
- –ë“Ø—Ö –∑–∞—Ö–∏–∞–ª–≥—É—É–¥—ã–Ω –∂–∞–≥—Å–∞–∞–ª—Ç —Ö–∞—Ä–∞–≥–¥–∞—Ö —ë—Å—Ç–æ–π
- Status, date range —à–∞–ª–≥–∞—Ö

### 3. Overlap checking logic —à–∞–ª–≥–∞—Ö

–¢–∞ —Å–æ–Ω–≥–æ—Å–æ–Ω –æ–≥–Ω–æ–æ:
- Start: 2025-10-17
- End: 2025-10-24

–•—ç—Ä—ç–≤ database –¥—ç—ç—Ä –¥–∞—Ä–∞–∞—Ö –∑–∞—Ö–∏–∞–ª–≥—É—É–¥ –±–∞–π–≤–∞–ª **–¥–∞–≤—Ö–∞—Ä–¥–∞–ª** –≥–∞—Ä–Ω–∞:

| –ó–∞—Ö–∏–∞–ª–≥—ã–Ω Start | –ó–∞—Ö–∏–∞–ª–≥—ã–Ω End | –î–∞–≤—Ö–∞—Ä–¥–∞—Ö —ç—Å—ç—Ö | –®–∞–ª—Ç–≥–∞–∞–Ω |
|----------------|---------------|---------------|----------|
| 2025-10-15 | 2025-10-18 | ‚úÖ –î–ê–í–•–ê–†–î–ê–ù–ê | End (18) > —Ç–∞–Ω—ã start (17) |
| 2025-10-20 | 2025-10-25 | ‚úÖ –î–ê–í–•–ê–†–î–ê–ù–ê | Start (20) < —Ç–∞–Ω—ã end (24) |
| 2025-10-16 | 2025-10-26 | ‚úÖ –î–ê–í–•–ê–†–î–ê–ù–ê | –¢–∞–Ω—ã —Ö—É–≥–∞—Ü–∞–∞–≥ –±“Ø—Ö—ç–ª–¥ –Ω—å –±–∞–≥—Ç–∞–∞–∂ –±–∞–π–Ω–∞ |
| 2025-10-10 | 2025-10-15 | ‚ùå –î–ê–í–•–ê–†–î–ê–•–ì“Æ–ô | End (15) < —Ç–∞–Ω—ã start (17) |
| 2025-10-25 | 2025-10-30 | ‚ùå –î–ê–í–•–ê–†–î–ê–•–ì“Æ–ô | Start (25) > —Ç–∞–Ω—ã end (24) |

### 4. Backend overlap logic:

```typescript
// Backend-–∏–π–Ω checkYurtAvailability query
OR: [
  {
    // –ó–∞—Ö–∏–∞–ª–≥–∞ —Ç–∞–Ω—ã —Ö—É–≥–∞—Ü–∞–∞–Ω–¥ —ç—Ö—ç–ª–∂ –±–∞–π–Ω–∞
    startDate: { gte: start, lt: end }
  },
  {
    // –ó–∞—Ö–∏–∞–ª–≥–∞ —Ç–∞–Ω—ã —Ö—É–≥–∞—Ü–∞–∞–Ω–¥ –¥—É—É—Å—á –±–∞–π–Ω–∞
    endDate: { gt: start, lte: end }
  },
  {
    // –ó–∞—Ö–∏–∞–ª–≥–∞ —Ç–∞–Ω—ã —Ö—É–≥–∞—Ü–∞–∞–≥ –±“Ø—Ö—ç–ª–¥ –Ω—å —Ö–∞–º–∞—Ä—á –±–∞–π–Ω–∞
    AND: [
      { startDate: { lte: start } },
      { endDate: { gte: end } }
    ]
  }
]
```

## üõ†Ô∏è –®–∏–π–¥—ç–ª:

### –®–∏–π–¥—ç–ª 1: Database “Ø–Ω—ç–Ω –∑”©–≤ —ç—Å—ç—Ö–∏–π–≥ —à–∞–ª–≥–∞—Ö

Terminal:
```bash
cd tusul_back
npx prisma studio
```

Prisma Studio –Ω—ç—ç–≥–¥—ç—Ö “Ø–µ–¥:
1. "Booking" table —Å–æ–Ω–≥–æ–Ω–æ
2. `yurtId = 6f74c9a7-f197-45dd-a19f-a16b5a46813f` –≥—ç—Å—ç–Ω –∑–∞—Ö–∏–∞–ª–≥—É—É–¥—ã–≥ —Ö–∞–π–Ω–∞
3. Status = "PENDING" —ç—Å–≤—ç–ª "CONFIRMED" –∑–∞—Ö–∏–∞–ª–≥—É—É–¥—ã–≥ —Ö–∞—Ä–Ω–∞
4. –¢—ç–¥–≥—ç—ç—Ä–∏–π–Ω startDate, endDate —à–∞–ª–≥–∞–Ω–∞

### –®–∏–π–¥—ç–ª 2: –¶—É—Ü–ª–∞–≥–¥—Å–∞–Ω –∑–∞—Ö–∏–∞–ª–≥—É—É–¥—ã–≥ —à–∞–ª–≥–∞—Ö

–•—ç—Ä—ç–≤ CANCELLED —ç—Å–≤—ç–ª COMPLETED –∑–∞—Ö–∏–∞–ª–≥—É—É–¥ –±–∞–π–≥–∞–∞ –±–æ–ª —Ç—ç–¥ **disable –±–æ–ª–æ—Ö–≥“Ø–π** –±–∞–π—Ö —ë—Å—Ç–æ–π.

Frontend logic:
```typescript
const activeBookings = camp.bookings.filter(
  (booking: any) => booking.status === 'PENDING' || booking.status === 'CONFIRMED'
);
```

Backend logic:
```typescript
status: { in: ['PENDING', 'CONFIRMED'] }
```

**–•–æ—ë—É–ª–∞–∞ –∏–∂–∏–ª –±–∞–π—Ö —ë—Å—Ç–æ–π!** ‚úÖ

### –®–∏–π–¥—ç–ª 3: Console logs-–≥ —à–∞–ª–≥–∞—Ö

Browser console –¥—ç—ç—Ä:
```javascript
// Frontend –¥—ç—ç—Ä disable —Ö–∏–π—Å—ç–Ω ”©–¥—Ä“Ø“Ø–¥
üö´ Disabled date ranges: ["2025-10-18", "2025-10-19", "2025-10-20", ...]
```

–¢–∞–Ω—ã —Å–æ–Ω–≥–æ—Å–æ–Ω –æ–≥–Ω–æ–æ (2025-10-17 - 2025-10-24) —ç–Ω—ç –∂–∞–≥—Å–∞–∞–ª—Ç—Ç–∞–π –¥–∞–≤—Ö–∞—Ä—á –±–∞–π–Ω–∞ —É—É?

### –®–∏–π–¥—ç–ª 4: Timezone –∞—Å—É—É–¥–∞–ª

–ú–∞–≥–∞–¥–≥“Ø–π timezone ”©”©—Ä –±–∞–π–Ω–∞:
```typescript
// Frontend
const startDate = new Date(checkIn).toISOString(); // "2025-10-17T00:00:00.000Z"

// Backend
const start = new Date(startDate); // UTC –æ–≥–Ω–æ–æ
```

**Test:** GraphQL Playground –¥—ç—ç—Ä –¥–∞—Ä–∞–∞—Ö query –∞–∂–∏–ª–ª—É—É–ª–Ω–∞:
```graphql
query CheckAvailability {
  checkYurtAvailability(
    yurtId: "6f74c9a7-f197-45dd-a19f-a16b5a46813f"
    startDate: "2025-10-17T00:00:00.000Z"
    endDate: "2025-10-24T00:00:00.000Z"
  )
}
```

**–•—ç—Ä—ç–≤ false –±—É—Ü–∞–∞–≤–∞–ª:** Database –¥—ç—ç—Ä –¥–∞–≤—Ö–∞—Ä–¥—Å–∞–Ω –∑–∞—Ö–∏–∞–ª–≥–∞ –±–∞–π–Ω–∞ –≥—ç—Å—ç–Ω “Ø–≥

## üìä –î–∞—Ä–∞–∞–≥–∏–π–Ω –∞–ª—Ö–∞–º:

1. ‚úÖ Browser console logs —à–∞–ª–≥–∞—Ö
2. ‚úÖ Database –¥—ç—ç—Ä—Ö –∑–∞—Ö–∏–∞–ª–≥—É—É–¥—ã–≥ —Ö–∞—Ä–∞—Ö (Prisma Studio)
3. ‚úÖ `checkYurtAvailability` query —Ç–µ—Å—Ç–ª—ç—Ö
4. ‚úÖ –î–∞–≤—Ö–∞—Ä–¥—Å–∞–Ω –∑–∞—Ö–∏–∞–ª–≥—É—É–¥—ã–≥ –æ–ª–æ—Ö
5. ‚úÖ –•—ç—Ä—ç–≤ —Ö—É—É—á–∏–Ω –∑–∞—Ö–∏–∞–ª–≥–∞ –±–∞–π–≤–∞–ª status-–∏–π–≥ COMPLETED —ç—Å–≤—ç–ª CANCELLED –±–æ–ª–≥–æ—Ö

## üéØ –¢–µ—Å—Ç —Ö–∏–π—Ö:

```bash
# Terminal 1: Backend –∞–∂–∏–ª–ª—É—É–ª–∞—Ö
cd tusul_back
npm run dev

# Terminal 2: Frontend –∞–∂–∏–ª–ª—É—É–ª–∞—Ö
cd ..
npm run dev

# Browser:
# 1. http://localhost:3000/camps —Ä—É—É –æ—Ä–Ω–æ
# 2. Camp —Å–æ–Ω–≥–æ–Ω–æ
# 3. F12 –¥–∞—Ä–∂ Console –Ω—ç—ç–Ω—ç
# 4. Console logs —à–∞–ª–≥–∞—Ö
# 5. –û–≥–Ω–æ–æ —Å–æ–Ω–≥–æ–∂ –∑–∞—Ö–∏–∞–ª–≥–∞ —Ö–∏–π–∂ “Ø–∑–Ω—ç
```

---

–ê—Å—É—É–ª—Ç –±–∞–π–≤–∞–ª –Ω–∞–¥–∞–¥ —Ö—ç–ª—ç—ç—Ä—ç–π!

