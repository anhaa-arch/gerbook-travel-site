# 💬 Сэтгэгдэл систем - Бүрэн заавар

## ✅ Юу хийгдсэн:

Camp detail page дээр нэвтэрсэн хэрэглэгчид сэтгэгдэл үлдээх, харах боломжтой боллоо.

### Backend:
- ✅ **Comment model** - Prisma schema-д нэмэгдсэн
- ✅ **GraphQL schema** - Comment type, queries, mutations
- ✅ **Resolvers** - createComment, deleteComment, comments queries
- ✅ **Database** - `Comment` table үүсгэгдсэн

### Frontend:
- ✅ **CommentSection component** - Бүрэн интерактив сэтгэгдэл хэсэг
- ✅ **Camp detail page** - Сэтгэгдэл харуулах, нэмэх

## 🚀 Тест хийх:

### 1️⃣ Camp detail page-д орох

```
http://localhost:3000/camp/6f74c9a7-f197-45dd-a19f-a16b5a46813f
```

### 2️⃣ Сэтгэгдэл харах

Хуудасны доод талд **"Сэтгэгдэл (0)"** хэсэг харагдах ёстой.

Одоогоор сэтгэгдэл байхгүй:
```
┌─────────────────────────────────────┐
│ Сэтгэгдэл (0)                       │
│                                     │
│ Одоогоор сэтгэгдэл байхгүй байна.  │
│ Эхний сэтгэгдлийг та үлдээнэ үү!    │
└─────────────────────────────────────┘
```

### 3️⃣ Нэвтэрч орох

Хэрэв нэвтрээгүй бол:
```
http://localhost:3000/login
```

Нэвтэрсний дараа дахин camp detail page-д орох.

### 4️⃣ Сэтгэгдэл үлдээх

Нэвтэрсэн хэрэглэгчдэд харагдах:

```
┌──────────────────────────────┐
│ Үнэлгээ                      │
│ ⭐ ⭐ ⭐ ⭐ ⭐               │
│ (од дээр дарж сонгох)         │
│                              │
│ Сэтгэгдэл                     │
│ ┌──────────────────────────┐ │
│ │ Таны туршлагыг хуваалцана│ │
│ │ уу...                    │ │
│ └──────────────────────────┘ │
│                              │
│ [Сэтгэгдэл үлдээх]           │
└──────────────────────────────┘
```

**Алхамууд:**
1. **Од** дээр дарж үнэлгээ өгнө (1-5)
2. **Сэтгэгдэл** бичнэ
3. **"Сэтгэгдэл үлдээх"** дарна

**"✅ Амжилттай - Сэтгэгдэл амжилттай нэмэгдлээ"** гэсэн toast харагдах ёстой.

### 5️⃣ Сэтгэгдэл харах

Нэмсэн сэтгэгдэл одоо харагдана:

```
┌─────────────────────────────────────┐
│ Сэтгэгдэл (1)                       │
│ ⭐ 4.5  (1 үнэлгээ)                │
├─────────────────────────────────────┤
│ 👤 Таны нэр                         │
│    ⭐⭐⭐⭐⭐                        │
│    2025 оны 1 сарын 18               │
│                                     │
│    Таны бичсэн сэтгэгдэл...         │
│                              [🗑️]  │
└─────────────────────────────────────┘
```

### 6️⃣ Сэтгэгдэл устгах

Зөвхөн **өөрийн сэтгэгдэл** эсвэл **admin** хэрэглэгч устгах боломжтой.

Устгах button (🗑️) дээр дарах:
- **"Сэтгэгдлийг устгах уу?"** confirm харагдана
- **"OK"** дарвал устана

## 📋 Функцүүд:

### Үнэлгээ (Rating)
- 1-5 од
- Дундаж үнэлгээ автоматаар тооцогдоно
- Од дээр дарж сонгох

### Сэтгэгдэл (Comment)
- Textarea - Чөлөөтэй бичих
- Хамгийн ихдээ 1000 тэмдэгт (backend-д тохируулсан)
- Өөрчлөх боломжгүй (шинэ сэтгэгдэл үлдээх л боломжтой)

### Эрх (Authorization)
- **Нэвтрээгүй:** Зөвхөн унших
- **Нэвтэрсэн:** Сэтгэгдэл үлдээх
- **Өөрийн сэтгэгдэл:** Устгах боломжтой
- **Admin:** Бүх сэтгэгдлийг устгах боломжтой

### Цаг хугацаа
- Үүсгэсэн огноо: **2025 оны 1 сарын 18** форматаар
- Шинэ → Хуучин дарааллаар харагдана

## 🐛 Алдаа гарвал:

### "Нэвтрэх шаардлагатай"
- Нэвтрээгүй байна
- `/login` хуудсанд очиж нэвтрэх

### "Үнэлгээ 1-5 хооронд байх ёстой"
- Од сонгоогүй
- 1-5 хооронд од сонгох

### "Сэтгэгдэл олдсонгүй"
- Устгаж буй сэтгэгдэл байхгүй
- Хуудсыг refresh хийх

### "Зөвхөн өөрийн сэтгэгдлийг устгах боломжтой"
- Өөрийн сэтгэгдэл биш
- Admin биш бол устгах боломжгүй

## 🎨 Дизайн:

- **Desktop:** 2 багана - form + comments
- **Mobile:** 1 багана - стэк
- **Colors:** 
  - Primary: Emerald green (#10b981)
  - Stars: Yellow (#fbbf24)
  - Delete: Red (#ef4444)

## 📊 Database:

```prisma
model Comment {
  id        String   @id @default(uuid())
  user      User     @relation(fields: [userId], references: [id])
  userId    String
  yurt      Yurt     @relation(fields: [yurtId], references: [id])
  yurtId    String
  rating    Int      // 1-5
  comment   String   @db.Text
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
```

## 🔥 GraphQL Queries:

### Comments жагсаалт
```graphql
query GetComments($yurtId: ID!) {
  comments(yurtId: $yurtId) {
    id
    user {
      id
      name
    }
    rating
    comment
    createdAt
  }
}
```

### Сэтгэгдэл үүсгэх
```graphql
mutation CreateComment($input: CreateCommentInput!) {
  createComment(input: $input) {
    id
    rating
    comment
    createdAt
    user {
      id
      name
    }
  }
}
```

### Сэтгэгдэл устгах
```graphql
mutation DeleteComment($id: ID!) {
  deleteComment(id: $id) {
    id
  }
}
```

## ✨ Бэлэн боллоо!

Одоо camp detail page дээр хэрэглэгчид сэтгэгдэл үлдээж, бусдын сэтгэгдлийг харах боломжтой боллоо! 🎉

